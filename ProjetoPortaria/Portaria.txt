
/******************************/
 create table tbUnidade( 
    idunidade number(3), 
    numero varchar2(20), 
    bloco varchar2(20), 
    andar number(3.0), 
    quadra varchar2(20), 
    rua varchar2(20), 
    observacao varchar2(20) 
 );
 CREATE TABLE tbcategoria( 
    idcategoria number(3), 
    nome varchar2(20) 
 );
 create table tbpessoa( 
    idpessoa number(3),  
    cpf varchar2(16), 
    nome varchar2(40), 
    categoria number (3.0), 
    telefone varchar2(13), 
    email varchar2(30), 
    liberacao char(1), 
    observacao varchar(50) 
 );
create table tbpessoa_has_unidade( 
    idtbpessoa number(3), 
    idtbunidade number(3.0) 
);
create table tbacesso( 
    idacesso number(3), 
    idpessoa number(3), 
    idunidade number(3.0), 
    datahorachegada date, 
    datahorasaida date 
 );

ALTER TABLE tbunidade 
ADD CONSTRAINT pk_unidade PRIMARY KEY (idunidade);

ALTER TABLE tbcategoria 
ADD CONSTRAINT pk_categoria PRIMARY KEY (idcategoria);

ALTER TABLE tbpessoa 
ADD CONSTRAINT pk_pessoa PRIMARY KEY (idpessoa);

ALTER TABLE tbpessoa_has_unidade 
ADD CONSTRAINT pk_pessoa_unidade PRIMARY KEY (idtbpessoa, idtbunidade);

ALTER TABLE tbpessoa_has_unidade 
ADD CONSTRAINT fk_pu_pessoa 
   FOREIGN KEY (idtbpessoa) 
   REFERENCES tbpessoa(idpessoa);

ALTER TABLE tbpessoa_has_unidade 
ADD CONSTRAINT fk_pu_pessoa_unidade 
   FOREIGN KEY (idtbunidade) 
   REFERENCES tbunidade (idunidade);

  ALTER TABLE tbpessoa 
ADD CONSTRAINT fk_categoria 
   FOREIGN KEY (categoria) 
   REFERENCES tbcategoria (idcategoria);

ALTER TABLE tbacesso 
ADD CONSTRAINT fk_acesso_pessoa_unidade
  FOREIGN KEY (idpessoa, idunidade) 
  REFERENCES tbpessoa_has_unidade(idtbpessoa, idtbunidade);
/****************************************************************/
